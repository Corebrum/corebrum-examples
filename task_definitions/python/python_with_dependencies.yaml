task_definition:
  name: "python_factorial_with_deps"
  version: "1.0"
  description: "Python factorial using embedded inputs; publishes to Zenoh"
  inputs:
    - name: "number"
      type: "number"
  outputs:
    - name: "result"
      type: "zenoh"
      key: "corebrum/examples/python_deps/result"
  validation: []
  metadata: {}
  dependencies: ["python"]
  
  compute_logic:
    type: "expression"
    language: "python"
    timeout_seconds: 10
    
    code: |
      import json, time
      def factorial(n):
          return 1 if n<=1 else n*factorial(n-1)
      number = int(inputs.get('number', 10))
      start = time.time(); value = factorial(number); end = time.time()
      output = {
          'factorial': value,
          'input_number': number,
          'computation_time_ms': int((end - start) * 1000),
          'method': 'python',
          'dependencies_required': ['python']
      }
      print(json.dumps(output))
    
    input_schema:
      type: "object"
      properties:
        number:
          type: "integer"
          minimum: 0
          maximum: 20
      required: ["number"]
